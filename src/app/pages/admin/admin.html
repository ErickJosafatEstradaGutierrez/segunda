<div class="admin-container">

  <h2>Panel del Administrador</h2>

  <!-- Mapa -->
  <div id="map" style="height: 400px;">
    <p *ngIf="loading">Cargando mapa...</p>
  </div>

  <!-- GRID de entregadores -->
  <h3>Estado de los Deliveries</h3>
  <table class="grid">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Status</th>
        <th>Ubicación actual</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let delivery of deliveries">
        <td>{{ delivery.usuario }}</td>
        <td>{{ getStatusText(delivery.status) }}</td>
        <td>{{ delivery.ubicacion || '-' }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Botón para asignar paquete -->
  <button class="btn-assign" (click)="openModal()" [disabled]="loading">
    Asignar Paquete
  </button>

  <!-- Modal -->
  <div class="modal-backdrop" *ngIf="showModal">
    <div class="modal">
      <h3>Asignar paquete</h3>

      <label for="deliverySelect">Selecciona un delivery:</label>
      <select id="deliverySelect" [(ngModel)]="selectedDelivery">
        <option *ngFor="let delivery of deliveries" [value]="delivery.usuario" [disabled]="delivery.status !== 'activo'">
          {{ delivery.usuario }} ({{ getStatusText(delivery.status) }})
        </option>
      </select>

      <label for="ubicacionInput">Ubicación del paquete:</label>
      <input id="ubicacionInput" type="text" [(ngModel)]="paqueteUbicacion" placeholder="lat,lng">

      <div class="modal-buttons">
        <button (click)="asignarPaquete()">Asignar</button>
        <button (click)="closeModal()">Cerrar</button>
      </div>
    </div>
  </div>

</div>
